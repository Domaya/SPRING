package ncontroller;

import java.util.List;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.servlet.ModelAndView;

import vo.Notice;

/*
 *    
   Annotation변경
   
   @controller
   @RequestMapping
   
   하나의 컨트롤러를 만들라는 얘기 >> 이름 CustomerController로
게시판 목록보기, 게시판 상세보기를 함수 매핑을 이용해서 완성

@Controller
class Board{
	@RequestMapping("/list.do")
	void listBoard(){
	}
	
	@RequestMapping("/insert.do")
	void insertBoard(){
	}
 */
@Controller
public class CustomerController {
	
	//		<a href="customer/notice.htm">고객센터</a>
	
	@RequestMapping("/customer/notice.htm")
	public ModelAndView noticelist(@RequestParam(value="seq", defaultValue = "") String query) {
		System.out.println("테스트");
		
	     //DAO 객체 사용
		//public List<Notice> getNotices(int page, String field, String query)
		
		String _page = request.getParameter("pg");
		String _field = request.getParameter("f");
		String _query = request.getParameter("p");
		  
		//default 값 설정
		int page = 1;
		String field="TITLE";
		String query = "%%";
		if(_page != null   && ! _page.equals("")) {
			page  = Integer.parseInt(_page);
		}
		
		if(_field != null   && ! _field.equals("")) {
			field = _field;
		}
		
		if(_page != null   && ! _page.equals("")) {
			page  = Integer.parseInt(_page);
		}
		
		if(_query != null   && ! _query.equals("")) {
			query = _query;
		}
		
		//DAO 작업
		List<Notice>  list = noticsdao.getNotices(page, field, query);
		
		
		
		return  new ModelAndView("notice"); //public String searchExternal()   view 주소
	}
	
	
	//	<a href="noticeDetail.htm?seq=${n.seq}"></a>
	@RequestMapping("/customer/noticeDetail.htm")
	public ModelAndView noticeDetail(@RequestParam(value="seq", defaultValue = "") String query) {
		
		System.out.println("param query: " + query);
		
		return new ModelAndView("customer/notice");
	}
	
}
